
<!doctype html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.8">
    
    
      
        <title>Join e agregação - Docs-ifpr</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#join-e-agregacao" class="md-skip">
          Ir para o conteúdo
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabeçalho">
    <a href="../../../.." title="Docs-ifpr" class="md-header__button md-logo" aria-label="Docs-ifpr" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Docs-ifpr
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Join e agregação
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Buscar" placeholder="Buscar" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Pesquisar">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Limpar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando a pesquisa
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/psenna/ifpr-disciplinas" title="Ir ao repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    psenna/ifpr-disciplinas
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegação" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Docs-ifpr" class="md-nav__button md-logo" aria-label="Docs-ifpr" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Docs-ifpr
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/psenna/ifpr-disciplinas" title="Ir ao repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    psenna/ifpr-disciplinas
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Material das aulas do IFPR
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          ADS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ADS" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          ADS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        Análise e desenvolvimento de sistemas
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          2021
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="2021" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          2021
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_1" type="checkbox" id="__nav_2_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2_1">
          Redes2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Redes2" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          Redes2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2021/redes2/27-utilizando_chaves_no_ssh/" class="md-nav__link">
        Utilizando chaves no SSH
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_2" type="checkbox" id="__nav_2_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2_2">
          Web1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Web1" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_2">
          <span class="md-nav__icon md-icon"></span>
          Web1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2021/web1/19%20-%20javascript1/" class="md-nav__link">
        19 - Primeiro exemplo de JavaScript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2021/web1/20-javascript_utilizando_propriedade_id/" class="md-nav__link">
        20 - Encontrando componentes no JS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2021/web1/21-eventos_javascript_botao/" class="md-nav__link">
        21 - Eventos com JS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2021/web1/22%20-%20programinhas%20em%20js/" class="md-nav__link">
        Programinhas em JS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2021/web1/23%20-%20validando%20forms%20com%20js/" class="md-nav__link">
        Validando Forms com JS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../2021/web1/24%20-%20vue1/" class="md-nav__link">
        Vue.js: Introdução
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          2022
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="2022" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          2022
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_1" type="checkbox" id="__nav_2_3_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3_1">
          BD2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="BD2" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_3_1">
          <span class="md-nav__icon md-icon"></span>
          BD2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01%20-%20revis%C3%A3o/" class="md-nav__link">
        Revisão de SQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02%20-%20revis%C3%A3o%20select/" class="md-nav__link">
        Revisão de SQL: SELECT
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Join e agregação
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Join e agregação
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#banco-de-dados" class="md-nav__link">
    Banco de dados
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#join" class="md-nav__link">
    Join
  </a>
  
    <nav class="md-nav" aria-label="Join">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tipos-de-join" class="md-nav__link">
    Tipos de JOIN
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agregacao" class="md-nav__link">
    Agregação
  </a>
  
    <nav class="md-nav" aria-label="Agregação">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#group-by" class="md-nav__link">
    GROUP BY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcoes-de-agregacao" class="md-nav__link">
    Funções de agregação
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#having" class="md-nav__link">
    HAVING
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exemplos" class="md-nav__link">
    Exemplos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#atividades" class="md-nav__link">
    Atividades
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04%20-%20Visoes/" class="md-nav__link">
        Visões
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05%20-%20lista_prova/" class="md-nav__link">
        Lista de revisão para a prova
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../09%20-%20subqueries1/" class="md-nav__link">
        Subquery como filtro de uma nova consulta
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10%20-%20subqueries%202/" class="md-nav__link">
        Subquery como uma nova coluna da consulta
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../11%20-%20triggers/" class="md-nav__link">
        Triggers 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../12%20-%20triggers%20com%20condicoes/" class="md-nav__link">
        Triggers com condições
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../13%20-%20revisao_prova/" class="md-nav__link">
        Revisão para prova
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_2" type="checkbox" id="__nav_2_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3_2">
          Seguranca
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Seguranca" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          Seguranca
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Seguranca/atividade_hash/" class="md-nav__link">
        Atividade Hash
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_3" type="checkbox" id="__nav_2_3_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3_3">
          Topicos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Topicos" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_3_3">
          <span class="md-nav__icon md-icon"></span>
          Topicos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Topicos/01%20-%20github/" class="md-nav__link">
        Utilizando o github no VSCode
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#banco-de-dados" class="md-nav__link">
    Banco de dados
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#join" class="md-nav__link">
    Join
  </a>
  
    <nav class="md-nav" aria-label="Join">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tipos-de-join" class="md-nav__link">
    Tipos de JOIN
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agregacao" class="md-nav__link">
    Agregação
  </a>
  
    <nav class="md-nav" aria-label="Agregação">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#group-by" class="md-nav__link">
    GROUP BY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcoes-de-agregacao" class="md-nav__link">
    Funções de agregação
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#having" class="md-nav__link">
    HAVING
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exemplos" class="md-nav__link">
    Exemplos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#atividades" class="md-nav__link">
    Atividades
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/psenna/ifpr-disciplinas/edit/master/docs/ADS/2022/BD2/03 - join_e_agregacao.md" title="Editar esta página" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="join-e-agregacao">Join e agregação</h1>
<h2 id="banco-de-dados">Banco de dados</h2>
<p>Nessa aula vamos utilizar esse banco de dados: <a href="../sql/empresa.sql">empresa.sql</a></p>
<p><img alt="aang" src="../imgs/empresa.png" /></p>
<h2 id="join">Join</h2>
<p>Utilizamos o JOIN quando queremos juntar lado a lado duas tabelas. </p>
<p>Normalmente fazemos isso juntando as linhas que possuem alguma relação entre elas.</p>
<p>No nosso banco, se quisermos mostrar o nome dos clientes e das cidades na mesma consulta, temos que juntar as duas tabelas, juntando as linhas onde o id da cidade seja igual ao cidade_id do cliente. </p>
<h3 id="tipos-de-join">Tipos de JOIN</h3>
<p>Nós temos alguns tipos de JOINs disponíveis, e vamos escolher qual utilizar dependendo dos dados que queremos mostrar na consulta.</p>
<p><img alt="tipos_join" src="../imgs/join_types.jpg" /></p>
<p>Por padrão, o MySQL utiliza o INNER JOIN quando não especificamos qual tipo de join queremos fazer. No inner só serão retornadas as linhas que existem correspondentes nas duas tabelas. Caso nó façamos um join entre os clientes e as cidades com esse tipo de join, não serão mostradas as linhas com as cidades que não possuem nenhum cliente, nem as linhas dos clientes que não possuem cidade(nesse banco a cidade não pode ser nula, então isso não vai acontecer).</p>
<pre><code> SELECT cli.nome, cid.nome  
    FROM clientes AS cli 
    JOIN cidades AS cid ON cli.cidade_id = cid.id;

+---------------+----------+
| nome          | nome     |
+---------------+----------+
| Joao          | Umuarama |
| Ze            | Umuarama |
| Maria         | Umuarama |
| Bob esponja   | Umuarama |
| Goku          | Maringa  |
| Bulma         | Maringa  |
| Leia          | Londrina |
| Luke          | Londrina |
| Anakin        | Londrina |
| Tony Gordo    | Cascavel |
| Aldo o apache | Xambre   |
| Hans Landa    | Xambre   |
+---------------+----------+

</code></pre>
<p>Caso queiramos manter na resposta as cidades que não possuem nenhum cliente, podemos utilizar o RIGHT ou o LEFT JOIN, dependendo do lado onde a tabela está. Na consulta anterior, a cidade estava no lado direito, então podemos utilizar o RIGHT JOIN. Agora aparecem cidades com clientes NULL.</p>
<pre><code> SELECT cli.nome, cid.nome  
    FROM clientes AS cli 
    RIGHT JOIN cidades AS cid ON cli.cidade_id = cid.id;

+---------------+----------------+
| nome          | nome           |
+---------------+----------------+
| Tony Gordo    | Cascavel       |
| NULL          | Cedro          |
| Leia          | Londrina       |
| Luke          | Londrina       |
| Anakin        | Londrina       |
| Goku          | Maringa        |
| Bulma         | Maringa        |
| NULL          | Mundo Novo     |
| NULL          | Navirai        |
| NULL          | Nova Andradina |
| NULL          | Toledo         |
| Joao          | Umuarama       |
| Ze            | Umuarama       |
| Maria         | Umuarama       |
| Bob esponja   | Umuarama       |
| Aldo o apache | Xambre         |
| Hans Landa    | Xambre         |
+---------------+----------------+
</code></pre>
<p>Um último join interessante é quando queremos retornar apenas a linhas de uma tabela quando não existirem relações entre ela e a outra tabela. Por exemplo, se quisermos mostrar todas as cidades que não possuem clientes, posemos fazer a sequinte consulta:</p>
<pre><code>SELECT cid.nome
    FROM cidades AS cid
    LEFT JOIN clientes AS cli ON  cid.id = cli.cidade_id
    WHERE cli.id IS NULL;

+----------------+
| nome           |
+----------------+
| Cedro          |
| Mundo Novo     |
| Navirai        |
| Nova Andradina |
| Toledo         |
+----------------+
</code></pre>
<h2 id="agregacao">Agregação</h2>
<p>A agregação é uma função muito útil do SQL que nos permite juntar as linhas que possuem alguma informação em comum em uma única linha. Com isso, podemos fazer operações com os dados dessas linhas que foram "juntadas" e obter informações como a quantidade de linhas que se juntaram, a soma ou a média de algum valor ou fazer alguma operação com esses valores.</p>
<h3 id="group-by">GROUP BY</h3>
<p>Para fazer a agregação, utilizamos o GROUP BY e passamos uma ou mais colunas. </p>
<p>Todas as linhas que essas colunas possuirem o mesmo valor sejão unidas em uma única linha. Caso passemos mais de uma linha, todas devem ter o mesmo valor para que as linhas sejam unidas.</p>
<p>Vamos começar fazendo uma agregação apenas com a tabela vendas.</p>
<p>Vamos juntar todas as vendas que aconteceram no mesmo dia.</p>
<pre><code>SELECT * 
    FROM vendas as v
    GROUP BY v.data_operacao;

+----+------------+-------------+------------+---------------+
| id | cliente_id | valor_total | valor_pago | data_operacao |
+----+------------+-------------+------------+---------------+
|  1 |          1 |         100 |         20 | 2022-01-01    |
|  2 |          2 |         200 |        120 | 2022-02-01    |
|  3 |          2 |         300 |        245 | 2022-03-01    |
|  4 |          5 |         200 |        200 | 2022-04-01    |
+----+------------+-------------+------------+---------------+
</code></pre>
<p>Reparem que o MySQL pega as informações da primeira linha de cada grupo. Alguns bancos não permitem que mostremos colunas que não estejam no GROUP BY ou sejam usadas por alguma função.</p>
<p>Se quisermos juntar as linhas que possuem a mesma data e o mesmo valor total, podemos fazer essa consulta:</p>
<pre><code>SELECT * 
    FROM vendas as v
    GROUP BY v.data_operacao, valor_total;

+----+------------+-------------+------------+---------------+
| id | cliente_id | valor_total | valor_pago | data_operacao |
+----+------------+-------------+------------+---------------+
|  1 |          1 |         100 |         20 | 2022-01-01    |
|  9 |          3 |         300 |        220 | 2022-01-01    |
| 10 |          3 |         100 |         90 | 2022-02-01    |
|  2 |          2 |         200 |        120 | 2022-02-01    |
|  6 |          5 |         300 |         80 | 2022-02-01    |
| 19 |         12 |         100 |         20 | 2022-03-01    |
|  7 |          7 |         200 |        120 | 2022-03-01    |
|  3 |          2 |         300 |        245 | 2022-03-01    |
|  4 |          5 |         200 |        200 | 2022-04-01    |
+----+------------+-------------+------------+---------------+
</code></pre>
<h3 id="funcoes-de-agregacao">Funções de agregação</h3>
<p>São funções que recebem valores de uma coluna do grupo e retorna um único valor.</p>
<ul>
<li>MAX(coluna): Retorna o maior valor que existir nessa coluna para o grupo.</li>
<li>MIN(coluna): Retorna o menor valor que existir nessa coluna para o grupo.</li>
<li>SUM(coluna): Retorna a soma de todos os valores da coluna no grupo.</li>
<li>AVG(coluna): Retorna a média de todos os valores da coluna no grupo.</li>
<li>COUNT(coluna): Retorna a quantidade de valores existentes (não nulos) para essa coluna no grupo.</li>
</ul>
<p>Vamos testar isso agrupando as vendas por data e mostrando o mínimo, máximo e média do valor_total das operações na data:</p>
<pre><code>SELECT data_operacao AS 'data', 
    MIN(valor_total) AS 'menor valor', 
    MAX(valor_total) as 'maior valor', 
    AVG(valor_total) as 'valor medio'
    FROM vendas as v
    GROUP BY v.data_operacao;

+------------+-------------+-------------+-------------+
| data       | menor valor | maior valor | valor medio |
+------------+-------------+-------------+-------------+
| 2022-01-01 |         100 |         300 |         150 |
| 2022-02-01 |         100 |         300 |         200 |
| 2022-03-01 |         100 |         300 |         200 |
| 2022-04-01 |         200 |         200 |         200 |
+------------+-------------+-------------+-------------+
</code></pre>
<h3 id="having">HAVING</h3>
<p>O having funciona como um WHERE onde podemos fazer condições com as funçõe de agregação. Na consulta anterior, se quisermos apenas os dias que o valor média seja igual ou maior que 200, podemos utilizar o having.</p>
<pre><code>SELECT data_operacao AS 'data', 
    MIN(valor_total) AS 'menor valor', 
    MAX(valor_total) as 'maior valor', 
    AVG(valor_total) as 'valor medio'
    FROM vendas as v
    GROUP BY v.data_operacao
    HAVING AVG(valor_total) &gt;= 200;

+------------+-------------+-------------+-------------+
| data       | menor valor | maior valor | valor medio |
+------------+-------------+-------------+-------------+
| 2022-02-01 |         100 |         300 |         200 |
| 2022-03-01 |         100 |         300 |         200 |
| 2022-04-01 |         200 |         200 |         200 |
+------------+-------------+-------------+-------------+
</code></pre>
<h2 id="exemplos">Exemplos</h2>
<p>Caso você tenha que mandar o seu "cobrador" para uma cidade, como podemos descobrir onde temos mais dinheiro a receber?</p>
<p><img alt="aang" src="../imgs/rocky.jpeg" /></p>
<pre><code>SELECT cid.*, SUM(v.valor_total - v.valor_pago) AS 'divida'
    FROM cidades AS cid
    JOIN clientes AS cli ON  cid.id = cli.cidade_id
    JOIN vendas AS v ON v.cliente_id = cli.id
    GROUP BY cid.id
    ORDER BY divida desc;

+----+----------+--------+
| id | nome     | divida |
+----+----------+--------+
|  1 | Umuarama |    720 |
|  2 | Maringa  |    610 |
|  5 | Xambre   |    210 |
|  3 | Londrina |     80 |
|  4 | Cascavel |     40 |
+----+----------+--------+
</code></pre>
<h2 id="atividades">Atividades</h2>
<p>Utilizando o banco desta aula, faça as seguintes consultas:</p>
<ul>
<li>
<p>Mostre uma lista das cidades que a empresa possui algum cliente.</p>
</li>
<li>
<p>Mostre a quantidade de clientes que a empresa possui em cada cidade.</p>
</li>
</ul>
<pre><code>+----------------+---------------------+
| cidade         | quantidade_clientes |
+----------------+---------------------+
| Umuarama       |                   4 |
| Maringa        |                   2 |
| Londrina       |                   3 |
| Cascavel       |                   1 |
| Xambre         |                   2 |
| Toledo         |                   0 |
| Navirai        |                   0 |
| Mundo Novo     |                   0 |
| Nova Andradina |                   0 |
| Cedro          |                   0 |
+----------------+---------------------+
</code></pre>
<ul>
<li>
<p>Mostre a quantidade de compras que cada cliente fez.</p>
</li>
<li>
<p>Mostre o valor médio das compras por cidade, em ordem decrescente.</p>
</li>
<li>
<p>A empresa quer descobrir quem é o melhor cliente(maior soma das compras) de janeiro em cada cidade para mandar um presente. Como podemos fazer uma consulta para ajudar o gerente nessa tarefa?</p>
</li>
</ul>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Rodapé" >
      
        
        <a href="../02%20-%20revis%C3%A3o%20select/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: Revisão de SQL: SELECT" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Anterior
              </span>
              Revisão de SQL: SELECT
            </div>
          </div>
        </a>
      
      
        
        <a href="../04%20-%20Visoes/" class="md-footer__link md-footer__link--next" aria-label="Próximo: Visões" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Próximo
              </span>
              Visões
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copiado para \u00e1rea de transfer\u00eancia", "clipboard.copy": "Copiar para \u00e1rea de transfer\u00eancia", "search.config.lang": "pt", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Buscar", "search.result.more.one": "Mais 1 nesta p\u00e1gina", "search.result.more.other": "Mais # nesta p\u00e1gina", "search.result.none": "Nenhum resultado encontrado", "search.result.one": "1 resultado encontrado", "search.result.other": "# resultados encontrados", "search.result.placeholder": "Digite para iniciar a busca", "search.result.term.missing": "Ausente", "select.version.title": "Selecione a vers\u00e3o"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.0238f547.min.js"></script>
      
    
  </body>
</html>